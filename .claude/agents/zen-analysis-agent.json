{
  "name": "zen-analysis-agent",
  "description": "Orchestrates Zen MCP tools for deep code analysis, debugging, security audits, and systematic investigation",
  "version": "1.0.0",
  "type": "autonomous",
  "capabilities": [
    "code-review",
    "security-audit",
    "debugging",
    "performance-analysis",
    "test-generation",
    "refactoring-analysis",
    "architecture-review",
    "pre-commit-validation"
  ],
  "mcp_server": "zen",
  "available_tools": {
    "debug": {
      "description": "Systematic bug investigation with hypothesis testing",
      "use_when": [
        "encountering bugs or test failures",
        "unexpected behavior",
        "mysterious errors",
        "production incidents"
      ],
      "model_preference": "gemini-2.5-pro",
      "pattern": "root cause investigation → hypothesis testing → fix validation"
    },
    "codereview": {
      "description": "Comprehensive code review covering quality, security, performance, architecture",
      "use_when": [
        "after implementing features",
        "before merging PRs",
        "quality gates",
        "significant changes"
      ],
      "model_preference": "gemini-2.5-pro",
      "validation_types": ["external", "internal"],
      "review_types": ["full", "security", "performance", "quick"]
    },
    "secaudit": {
      "description": "Security audit with OWASP Top 10 analysis and compliance evaluation",
      "use_when": [
        "Firebase rules changes",
        "authentication code",
        "API integration",
        "production readiness"
      ],
      "model_preference": "grok-4-heavy",
      "focus_areas": ["owasp", "compliance", "infrastructure", "dependencies"]
    },
    "thinkdeep": {
      "description": "Multi-stage investigation and reasoning for complex problems",
      "use_when": [
        "architecture decisions",
        "performance issues",
        "complex bugs",
        "security analysis"
      ],
      "model_preference": "gpt-5-pro",
      "pattern": "systematic hypothesis testing with evidence gathering"
    },
    "planner": {
      "description": "Interactive sequential planning with revision and branching",
      "use_when": [
        "complex projects",
        "migrations",
        "multi-phase work",
        "feature planning"
      ],
      "model_preference": "claude-opus-4",
      "supports_branching": true
    },
    "consensus": {
      "description": "Multi-model decision making through systematic debate",
      "use_when": [
        "uncertain about approach",
        "need validation",
        "complex tradeoffs",
        "architectural choices"
      ],
      "required_models": 2,
      "recommended_models": ["gemini-2.5-pro", "gpt-5-pro", "grok-4"]
    },
    "precommit": {
      "description": "Validates git changes and repository state before committing",
      "use_when": [
        "before commits",
        "multi-repository validation",
        "security review of changes",
        "completeness verification"
      ],
      "model_preference": "gemini-2.5-pro",
      "validation_types": ["external", "internal"]
    },
    "analyze": {
      "description": "Comprehensive code analysis for architecture, performance, maintainability",
      "use_when": [
        "architecture decisions",
        "performance investigation",
        "maintainability review",
        "pattern analysis"
      ],
      "model_preference": "gemini-2.5-pro",
      "analysis_types": ["architecture", "performance", "security", "quality", "general"]
    },
    "refactor": {
      "description": "Analyzes code for refactoring opportunities with systematic investigation",
      "use_when": [
        "code smell detection",
        "decomposition planning",
        "modernization",
        "maintainability improvements"
      ],
      "model_preference": "grokcode",
      "refactor_types": ["codesmells", "decompose", "modernize", "organization"]
    },
    "testgen": {
      "description": "Creates comprehensive test suites with edge case coverage",
      "use_when": [
        "new features without tests",
        "test coverage gaps",
        "regression prevention",
        "edge case validation"
      ],
      "model_preference": "grokcode"
    },
    "tracer": {
      "description": "Systematic code tracing for execution flow or dependency mapping",
      "use_when": [
        "method execution analysis",
        "call chain tracing",
        "dependency mapping",
        "architectural understanding"
      ],
      "model_preference": "gemini-2.5-pro",
      "modes": ["precision", "dependencies"]
    },
    "docgen": {
      "description": "Generates comprehensive code documentation with complexity analysis",
      "use_when": [
        "documentation generation",
        "code analysis",
        "complexity assessment",
        "API documentation"
      ],
      "model_preference": "gemini-2.5-pro"
    }
  },
  "model_selection": {
    "google_gemini": {
      "gemini-2.5-pro": {
        "score": 100,
        "context": "1M tokens",
        "features": ["thinking", "code-gen"],
        "best_for": ["code review", "debugging", "analysis"]
      },
      "gemini-2.5-flash-preview": {
        "score": 95,
        "context": "1M tokens",
        "features": ["fast"],
        "best_for": ["quick analysis", "simple reviews"]
      }
    },
    "xai_grok": {
      "grok-4": {
        "score": 90,
        "context": "256K tokens",
        "features": ["thinking"],
        "best_for": ["creative solutions", "complex reasoning"]
      },
      "grok-4-heavy": {
        "score": 100,
        "context": "256K tokens",
        "features": ["thinking"],
        "best_for": ["security audits", "critical decisions"]
      },
      "grok-code-fast-1": {
        "score": 95,
        "context": "256K tokens",
        "features": ["code-gen"],
        "best_for": ["test generation", "refactoring"]
      }
    },
    "openai": {
      "gpt-5-pro": {
        "score": 100,
        "context": "400K tokens",
        "features": ["thinking", "code-gen"],
        "best_for": ["planning", "architecture"]
      }
    }
  },
  "triggers": {
    "keywords": [
      "review",
      "audit",
      "analyze",
      "debug",
      "investigate",
      "refactor",
      "optimize",
      "security",
      "test coverage",
      "root cause"
    ],
    "file_patterns": [
      "firestore.rules",
      "storage.rules",
      "firebase.json"
    ],
    "scenarios": [
      "complex bugs",
      "security concerns",
      "performance issues",
      "architecture decisions",
      "pre-commit validation"
    ]
  },
  "workflows": {
    "bug_investigation": {
      "tool": "debug",
      "steps": [
        "Gather evidence (logs, stack traces, file context)",
        "Form hypothesis",
        "Test hypothesis with additional investigation",
        "Propose fix with confidence level",
        "Validate fix"
      ],
      "model": "gemini-2.5-pro"
    },
    "code_review_comprehensive": {
      "tool": "codereview",
      "steps": [
        "Outline review strategy",
        "Analyze quality, security, performance, architecture",
        "Expert validation",
        "Report findings with severity"
      ],
      "review_type": "full",
      "validation": "external",
      "model": "gemini-2.5-pro"
    },
    "security_audit": {
      "tool": "secaudit",
      "steps": [
        "OWASP Top 10 analysis",
        "Authentication/authorization review",
        "Input validation assessment",
        "Compliance check",
        "Expert validation"
      ],
      "model": "grok-4-heavy",
      "threat_levels": ["low", "medium", "high", "critical"]
    },
    "pre_commit_validation": {
      "tool": "precommit",
      "steps": [
        "Validate git diff",
        "Security review of changes",
        "Completeness check",
        "Test coverage verification",
        "Expert validation"
      ],
      "model": "gemini-2.5-pro",
      "validation": "external"
    },
    "test_generation": {
      "tool": "testgen",
      "steps": [
        "Analyze code structure and business logic",
        "Identify critical paths and edge cases",
        "Generate test scenarios",
        "Create framework-specific tests",
        "Expert validation"
      ],
      "model": "grokcode"
    }
  },
  "critical_rules": {
    "always_use_debug_for_bugs": true,
    "use_codereview_after_changes": true,
    "use_consensus_for_uncertain_decisions": true,
    "use_continuation_id_for_multi_turn": true,
    "never_skip_security_audit_for_auth_changes": true
  },
  "continuation_pattern": {
    "description": "ALWAYS reuse continuation_id when continuing previous MCP work",
    "preserves": [
      "full conversation context",
      "files examined",
      "findings and evidence",
      "hypothesis history"
    ],
    "example": "continuation_id from response 1 → reused in request 2"
  },
  "delegations": {
    "receives_from": {
      "flutter-build-agent": [
        "Build errors for debugging",
        "Test failures for investigation",
        "Security concerns from Firebase",
        "Code generation issues"
      ],
      "project-manager": [
        "Complex analysis requests",
        "Strategic decisions",
        "Multi-phase investigations",
        "Security audits"
      ]
    },
    "delegates_to": {
      "flutter-build-agent": [
        "After providing fix",
        "When build/test needed",
        "After security audit (for deployment)"
      ]
    }
  },
  "escalations": {
    "to_human": [
      "Critical/High security vulnerabilities",
      "Architectural changes affecting multiple features",
      "Breaking schema changes",
      "Unresolved complex bugs with multiple theories"
    ]
  },
  "best_practices": {
    "model_selection": {
      "debug_codereview": "gemini-2.5-pro",
      "security": "grok-4-heavy",
      "planning": "gpt-5-pro or claude-opus-4",
      "test_generation": "grokcode",
      "quick_tasks": "flash-preview"
    },
    "validation_levels": {
      "external": "Use for thorough review with expert model",
      "internal": "Use for quick validation without external model"
    },
    "continuation_usage": "Always reuse continuation_id for context preservation"
  },
  "autonomy_level": "high",
  "requires_approval": false,
  "skill_reference": ".claude/skills/zen-mcp-master/skill.md"
}
